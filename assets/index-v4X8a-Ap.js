import{r}from"./iframe-C_g90xlo.js";import{h as m,u as x,P,a as h,i as j,f as M}from"./index-D7GSPBPt.js";import{j as b,P as z}from"./index-CkBqJvDx.js";function H(n,e=globalThis?.document){const t=m(n);r.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var K="DismissableLayer",p="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",R,T=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),B=r.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:d,onDismiss:l,...E}=n,c=r.useContext(T),[u,S]=r.useState(null),f=u?.ownerDocument??globalThis?.document,[,A]=r.useState({}),N=x(e,o=>S(o)),D=Array.from(c.layers),[W]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),k=D.indexOf(W),O=u?D.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,L=O>=k,U=G(o=>{const v=o.target,w=[...c.branches].some(y=>y.contains(v));!L||w||(s?.(o),d?.(o),o.defaultPrevented||l?.())},f),C=J(o=>{const v=o.target;[...c.branches].some(y=>y.contains(v))||(a?.(o),d?.(o),o.defaultPrevented||l?.())},f);return H(o=>{O===c.layers.size-1&&(i?.(o),!o.defaultPrevented&&l&&(o.preventDefault(),l()))},f),r.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(R=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),g(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=R)}},[u,f,t,c]),r.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),g())},[u,c]),r.useEffect(()=>{const o=()=>A({});return document.addEventListener(p,o),()=>document.removeEventListener(p,o)},[]),b.jsx(P.div,{...E,ref:N,style:{pointerEvents:_?L?"auto":"none":void 0,...n.style},onFocusCapture:h(n.onFocusCapture,C.onFocusCapture),onBlurCapture:h(n.onBlurCapture,C.onBlurCapture),onPointerDownCapture:h(n.onPointerDownCapture,U.onPointerDownCapture)})});B.displayName=K;var q="DismissableLayerBranch",F=r.forwardRef((n,e)=>{const t=r.useContext(T),i=r.useRef(null),s=x(e,i);return r.useEffect(()=>{const a=i.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),b.jsx(P.div,{...n,ref:s})});F.displayName=q;function G(n,e=globalThis?.document){const t=m(n),i=r.useRef(!1),s=r.useRef(()=>{});return r.useEffect(()=>{const a=l=>{if(l.target&&!i.current){let E=function(){I(X,t,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=E,e.addEventListener("click",s.current,{once:!0})):E()}else e.removeEventListener("click",s.current);i.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function J(n,e=globalThis?.document){const t=m(n),i=r.useRef(!1);return r.useEffect(()=>{const s=a=>{a.target&&!i.current&&I(Y,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function g(){const n=new CustomEvent(p);document.dispatchEvent(n)}function I(n,e,t,{discrete:i}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?j(s,a):s.dispatchEvent(a)}var te=B,se=F,Q="Portal",V=r.forwardRef((n,e)=>{const{container:t,...i}=n,[s,a]=r.useState(!1);M(()=>a(!0),[]);const d=t||s&&globalThis?.document?.body;return d?z.createPortal(b.jsx(P.div,{...i,ref:e}),d):null});V.displayName=Q;export{se as B,B as D,V as P,te as R};
